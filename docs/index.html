<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>composastructure</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">composastructure</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> composastructure</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#composastructure" id="composastructure" style="color: inherit; text-decoration: none;">
					<h1>Composastructure</h1>
				</a>
				<p>This README is up to date for features available as of 7/07/2020. Try to look for a more updated version in a newer branch if there are any. These branches will have a date in its name.</p>
				<p>Composastructure is a library/tool built off of Liqid&#39;s API for composing machines. The goal is to abstract away the lower level logic required to compose a machine and give you a new API that can do the same thing with as little as just one function call.</p>
				<p><strong>[Important]</strong> Composastructure is meant to be used as an npm module, but since it&#39;s not at that stage yet, you can clone this repo into your project&#39;s node_modules folder and use it the same way as any other npm module. One last thing to do after cloning though, is to navigate into Composastructure and do <code>npm install</code>. The development branch is the default branch, but you can switch to a different one if you&#39;d like.</p>
				<a href="#installation-in-the-future" id="installation-in-the-future" style="color: inherit; text-decoration: none;">
					<h2>Installation (In the future)</h2>
				</a>
				<p>Use npm to install Composastructure</p>
				<pre><code class="language-bash">npm install Composastructure</code></pre>
				<a href="#main-use-cases" id="main-use-cases" style="color: inherit; text-decoration: none;">
					<h2>Main Use Cases</h2>
				</a>
				<p>Composastructure is both a library and a tool. The following is a list of ways you can use it (ranked from easiet to more complicated to use). The further you go down this readme, the more you will have to learn the little details involved with creating groups or composing machines.</p>
				<pre><code><span class="hljs-number">1</span>: Standalone
    <span class="hljs-number">1.1</span>: REST API with built <span class="hljs-keyword">in</span> browser GUI
    <span class="hljs-number">1.2</span>: REST API without built <span class="hljs-keyword">in</span> browser GUI
<span class="hljs-number">2</span>: Integrated
    <span class="hljs-number">2.1</span>: Composastructure API
    <span class="hljs-number">2.2</span>: Liqid API</code></pre>
				<a href="#1-standalone" id="1-standalone" style="color: inherit; text-decoration: none;">
					<h2>1. Standalone</h2>
				</a>
				<p>Composastructure comes with a built in REST service that you can easily deploy and use. The benefit of going with the standalone method is the service becomes immediately usable whether you are using just the command line or using a GUI. The service also comes with basic authentication to allow only trusted parties access to endpoints and GUI.</p>
				<p>The main model of focus for running this service:</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">interface</span> RestServerConfig {
    liqidSystems: {             <span class="hljs-comment">// array of systems you want to control</span>
        ip: <span class="hljs-built_in">string</span>,             <span class="hljs-comment">// ip for the system</span>
        name: <span class="hljs-built_in">string</span>,           <span class="hljs-comment">// name that you want to give this system</span>
    }[],
    hostPort: <span class="hljs-built_in">number</span>,           <span class="hljs-comment">// port you want to run the server on</span>
    enableGUI?: <span class="hljs-built_in">boolean</span>,        <span class="hljs-comment">// do you want to use built in GUI?</span>
    sslCert?: {                 <span class="hljs-comment">// provide this to use https</span>
        privateKey: <span class="hljs-built_in">string</span>,     
        certificate: <span class="hljs-built_in">string</span>,    
        ca: <span class="hljs-built_in">string</span>              
    },                          
    adminLogin?: {              <span class="hljs-comment">// custom admin account (or use default)</span>
        username: <span class="hljs-built_in">string</span>,       <span class="hljs-comment">// default: admin</span>
        password: <span class="hljs-built_in">string</span>        <span class="hljs-comment">// default: compose</span>
    }
}</code></pre>
				<p>Expected file structure</p>
				<pre><code> üìÇ root_directory
 <span class="hljs-string">|- üìÑ server.ts </span>
 <span class="hljs-string">|- ...</span>
 \- üìÇ node_modules
    <span class="hljs-string">|- üìÅ Composastructure</span>
    \- ...</code></pre>
				<a href="#11-rest-api-with-built-in-browser-gui" id="11-rest-api-with-built-in-browser-gui" style="color: inherit; text-decoration: none;">
					<h3>1.1: REST API with built in browser GUI</h3>
				</a>
				<p>This use case is similar to how Liqid does it: exposed API with browser GUI available for interfacing with the system. Currently the GUI is still work in progress, but you can still access it and get a visual of what the Liqid system(s) looks like. This section will focus on how to run and use the GUI. Fow how to use the REST endpoints, refer to the next section.</p>
				<p>If you don&#39;t have an SSL certificate available, exclude the sslCert property from the config. Notice the property enableGUI is set to true here. A normal JavaScript variant is shown in the next section.</p>
				<pre><code class="language-typescript"><span class="hljs-comment">// server.ts</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> { RestServerConfig, RestServer } <span class="hljs-keyword">from</span> <span class="hljs-string">'Composastructure'</span>;

<span class="hljs-keyword">var</span> config: RestServerConfig = {
    liqidSystems: [{
        ip: <span class="hljs-string">'10.0.100.125'</span>,
        name: <span class="hljs-string">'DevKit'</span>
    }],
    hostPort: <span class="hljs-number">3000</span>,
    enableGUI: <span class="hljs-literal">true</span>,
    sslCert: {
        privateKey: fs.readFileSync(path.join(<span class="hljs-string">"keys"</span>, <span class="hljs-string">"_.evl.uic.edu.key"</span>), <span class="hljs-string">'utf8'</span>),
        certificate: fs.readFileSync(path.join(<span class="hljs-string">"keys"</span>, <span class="hljs-string">"_.evl.uic.edu.crt"</span>), <span class="hljs-string">'utf8'</span>),
        ca: fs.readFileSync(path.join(<span class="hljs-string">"keys"</span>, <span class="hljs-string">"_.evl.uic.edu-ca.crt"</span>), <span class="hljs-string">'utf8'</span>)
    },
    adminLogin: {
        username: <span class="hljs-string">'admin'</span>,
        password: <span class="hljs-string">'compose'</span>
    }
}

<span class="hljs-keyword">var</span> Server = <span class="hljs-keyword">new</span> RestServer(config);

Server.start().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Server started successfully'</span>);
});</code></pre>
				<a href="#12-rest-api-without-built-in-browser-gui" id="12-rest-api-without-built-in-browser-gui" style="color: inherit; text-decoration: none;">
					<h3>1.2: REST API without built in browser GUI</h3>
				</a>
				<p>Built in browser GUI use is set to false as the default value. This use case is ideal if you know you are not needing a GUI, or if you want to build your own.</p>
				<p>You may not be as familiar with TypeScript as JavaScript, or you just want to keep things as simple as possible. In that case, here&#39;s the same file in JavaScript. Notice the property enableGUI is set to false here. You can also leave this property out entirely.</p>
				<pre><code class="language-typescript"><span class="hljs-comment">// server.js</span>
<span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">var</span> Composastructure = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Composastructure'</span>);

<span class="hljs-keyword">var</span> config = {
    liqidSystems: [{
        ip: <span class="hljs-string">'10.0.100.125'</span>,
        name: <span class="hljs-string">'DevKit'</span>
    }],
    hostPort: <span class="hljs-number">3000</span>,
    enableGUI: <span class="hljs-literal">false</span>,
    sslCert: {
        privateKey: fs.readFileSync(path.join(<span class="hljs-string">"keys"</span>, <span class="hljs-string">"_.evl.uic.edu.key"</span>), <span class="hljs-string">'utf8'</span>),
        certificate: fs.readFileSync(path.join(<span class="hljs-string">"keys"</span>, <span class="hljs-string">"_.evl.uic.edu.crt"</span>), <span class="hljs-string">'utf8'</span>),
        ca: fs.readFileSync(path.join(<span class="hljs-string">"keys"</span>, <span class="hljs-string">"_.evl.uic.edu-ca.crt"</span>), <span class="hljs-string">'utf8'</span>)
    },
    adminLogin: {
        username: <span class="hljs-string">'admin'</span>,
        password: <span class="hljs-string">'compose'</span>
    }
}

<span class="hljs-keyword">var</span> Server = <span class="hljs-keyword">new</span> Composastructure.RestServer(config);

Server.start().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Server started successfully'</span>);
});</code></pre>
				<a href="#rest-api" id="rest-api" style="color: inherit; text-decoration: none;">
					<h4>REST API</h4>
				</a>
				<p><strong>Collections</strong>
					| Type | Endpoint      | Response and Type    |
					|------|---------------|----------------------|
					| GET  | /api/groups   | 200 GroupWrapper[]   |
					| GET  | /api/machines | 200 MachineWrapper[] |
					| GET  | /api/devices  | 200 DeviceWrapper[]  |
				| GET  | /api/fabrics  | 200 Overview         |</p>
				<p><strong>Lookup</strong>
					| Type | Endpoint                                    | Response and Type | Error Message |
					|------|---------------------------------------------|-------------------|---------------|
					| GET  | /api/group/{fabr_id}/{id}   | 200 GroupInfo     | N/A           |
					|      |                             | 400 BasicError    | - fabr_id has to be a number.<br>- id has to be a number. |
					|      |                             | 404 BasicError    | - Group {id} does not exist.<br>- Fabric {fabr_id} does not exist. |
					| GET  | /api/machine/{fabr_id}/{id} | 200 MachineInfo   | N/A           |
					|      |                             | 400 BasicError    | - fabr_id has to be a number.<br>- id has to be a number. |
					|      |                             | 404 BasicError    | - Machine {id} does not exist.<br>- Fabric {fabr_id} does not exist. |
					| GET  | /api/device/{fabr_id}/{id}  | 200 Device        | N/A           |
					|      |                             | 400 BasicError    | - fabr_id has to be a number.<br>- id has to be a number. |
				|      |                             | 404 BasicError    | - Device {id} does not exist.<br>- Fabric {fabr_id} does not exist. |</p>
				<p><strong>Details</strong>
					| Type | Endpoint                                            | Response and Type  | Error Message |
					|------|-----------------------------------------------------|--------------------|---------------|
					| GET  | /api/details/group/{fabr_id}/{id}   | 200 GroupDetails   | N/A           |
					|      |                                     | 400 BasicError     | - fabr_id has to be a number.<br>- id has to be a number. |
					|      |                                     | 404 BasicError     | - Group {id} does not exist.<br>- Fabric {fabr_id} does not exist. |
					|      |                                     | 500 BasicError     | - Undocumented error occurred in getting group details. |
					| GET  | /api/details/machine/{fabr_id}/{id} | 200 MachineDetails | N/A           |
					|      |                                     | 400 BasicError     | - fabr_id has to be a number.<br>- id has to be a number. |
					|      |                                     | 404 BasicError     | - Machine {id} does not exist.<br>- Fabric {fabr_id} does not exist. |
					|      |                                     | 500 BasicError     | - Undocumented error occurred in getting group details. |
					| GET  | /api/details/device/{fabr_id}/{id}  | 200 DeviceDetais   | N/A           |
					|      |                                     | 400 BasicError     | - fabr_id has to be a number.<br>- id has to be a number. |
					|      |                                     | 404 BasicError     | - Device {id} does not exist.<br>- Fabric {fabr_id} does not exist. |
				|      |                                     | 500 BasicError     | - Undocumented error occurred in getting group details. |</p>
				<p><strong>Control</strong>
					| Type   | Endpoint                    | Request Data Type  | Response and Type | Error Message |
					|--------|-----------------------------|--------------------|-------------------|---------------|
					| POST   | /api/group                  | GroupCreateOptions | 200 GroupInfo     | N/A           |
					|        |                             |                    | 400 BasicError    | - Request body is missing one or more required properties.<br>- fabrId has to be a number.<br>- name has to be a string. |
					|        |                             |                    | 404 BasicError    | - Fabric {fabrId} does not exist. |
					|        |                             |                    | 422 BasicError    | - Use a different group name. The one provided is already in use or is reserved.<br>- Do not use special characters for a group name. |
					|        |                             |                    | 500 BasicError    | - Controller for fabric {fabrId} is not ready. Server may be unable to connect to this Liqid system.<br>- Undocumented error occurred in group creation.<br>- Group seems to be created, but final verification failed. |
					|        |                             |                    | 503 BasicError    | - Controller for fabric {fabrId} is busy with a previous compose/create request. Please wait a few seconds and retry. |
					| POST   | /api/machine                | ComposeOptions     | 200 MachineInfo   | N/A           |
					|        |                             |                    | 400 BasicError    | - Request body is missing one or more required properties.<br>- fabrId has to be a number.<br>- name has to be a string.<br>- grpId has to be a number.<br>- DEVICE specification is neither a number nor a string array. |
					|        |                             |                    | 404 BasicError    | - Fabric {fabrId} does not exist.<br>- Group {grpId} does not exist.<br>- DEVICE {device_id} does not exist. |
					|        |                             |                    | 422 BasicError    | - The given machine name is already in use.<br>- Do not use special characters for a machine name.<br>- Machine specification must have at least one device.<br>- CPU count can not be more than 1.<br>- CPU specification should have no more than 1.<br>- The specified number of DEVICEs is more than what is currently available.<br>- The specified number of DEVICEs is more than the number of DEVICEs that are unused.<br>- DEVICE specification either contains duplicates or non string elements.<br>- DEVICE {device_id} is currently in use by machine {mach_name}.<br>- CPU with IPMI {ipmi} is currently in use by machine {machine_name}. |
					|        |                             |                    | 500 BasicError    | - Controller for fabric {fabrId} is not ready. Server may be unable to connect to this Liqid system.<br>- One or more requested devices did not get assigned properly. Aborting compose!<br>- Undocumented error occurred in gathering resources.<br>- Undocumented error occurred in composing machine.<br>- Machine seems to be composed, but final verification failed. |
					|        |                             |                    | 503 BasicError    | - Controller for fabric {fabrId} is busy with a previous compose/create request. Please wait a few seconds and retry. |
					| DELETE | /api/group/{fabr_id}/{id}   | N/A                | 200 GroupInfo     | N/A           |
					|        |                             |                    | 400 BasicError    | - fabr_id has to be a number.<br>- id has to be a number. |
					|        |                             |                    | 404 BasicError    | - Group {id} does not exist.<br>- Fabric {fabr_id} does not exist. |
					|        |                             |                    | 422 BasicError    | - Group {id} is not empty. Ensure all machines are removed from this group first. |
					|        |                             |                    | 500 BasicError    | - Controller for fabric {fabr_id} is not ready. Server may be unable to connect to this Liqid system.<br>- Undocumented error occurred in group deletion. |
					|        |                             |                    | 503 BasicError    | - Controller for fabric {fabr_id} is busy with a previous compose/create request. Please wait a few seconds and retry. |
					| DELETE | /api/machine/{fabr_id}/{id} | N/A                | 200 MachineInfo   | N/A           |
					|        |                             |                    | 400 BasicError    | - fabr_id has to be a number.<br>- id has to be a number. |
					|        |                             |                    | 404 BasicError    | - Machine {id} does not exist.<br>- Fabric {fabr_id} does not exist. |
					|        |                             |                    | 500 BasicError    | - Controller for fabric {fabr_id} is not ready. Server may be unable to connect to this Liqid system.<br>- Undocumented error occurred in machine deletion. |
				|        |                             |                    | 503 BasicError    | - Controller for fabric {fabr_id} is not ready. Server may be unable to connect to this Liqid system.<br>- Undocumented error occurred in group deletion. |</p>
				<a href="#2-integrated" id="2-integrated" style="color: inherit; text-decoration: none;">
					<h2>2. Integrated</h2>
				</a>
				<p>If you are building an application and you want more control over the system, you can use the following. This will require you to know more of the lower level logic involved in Composastructure or Liqid&#39;s API before you can effectively use it. The Composastructure API should provide you with all that you need, but you can supplement with Liqid&#39;s API if you need unimplemented features.</p>
				<a href="#21-composastructure-api" id="21-composastructure-api" style="color: inherit; text-decoration: none;">
					<h3>2.1: Composastructure API</h3>
				</a>
				<p>Composastructure implements the core functionalities from the Liqid API and makes it easier to work with in your application. Currently, the majority of error responses are in the form http error responses. This&#39;ll likely change in the future.</p>
				<a href="#liqidobserver" id="liqidobserver" style="color: inherit; text-decoration: none;">
					<h4>LiqidObserver</h4>
				</a>
				<p>Use the LiqidObserver class to pull relevant information about a Liqid system. The methods in this class will not affect the state of groups, machines, or devices in the system. Here are examples of how to use the public methods. Compared to the LiqidController class, you can have multiple observer instances observing a system, since they won&#39;t interfere with one another. You will notice that the methods are grouped by collections, lookup, and details just like the REST API, but do notice that some of the data types are not the same. Most, if not all, data types are provided by the Liqid API. You can find all of them in models.ts.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { LiqidObserver } <span class="hljs-keyword">from</span> <span class="hljs-string">'Composastructure'</span>;
<span class="hljs-keyword">var</span> observer = <span class="hljs-keyword">new</span> LiqidObserver(<span class="hljs-string">'10.0.100.125'</span>, <span class="hljs-string">'DevKit'</span>);

<span class="hljs-comment">// Calling start will allow the observer to grab its first set of data</span>
<span class="hljs-comment">// as well as establish a stomp connection to the system for real time updates.</span>
<span class="hljs-comment">// You can use observer.stop() to stop the observer.</span>
observer.start().then(<span class="hljs-function">(<span class="hljs-params">success</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (success) <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Observer successfully started. Now observing DevKit system.'</span>);
});</code></pre>
				<p><strong>Collections</strong></p>
				<pre><code class="language-typescript"><span class="hljs-keyword">let</span> groups: { [key: <span class="hljs-built_in">string</span>]: Group } = observer.getGroups(); <span class="hljs-comment">//group id as key</span>
<span class="hljs-keyword">let</span> machines: { [key: <span class="hljs-built_in">string</span>]: Machine } = observer.getMachines(); <span class="hljs-comment">// machine id as key</span>
<span class="hljs-keyword">let</span> predevices: { [key: <span class="hljs-built_in">string</span>]: PreDevice } = observer.getPreDevices(); <span class="hljs-comment">// device name as key</span>
<span class="hljs-keyword">let</span> deviceStatuses: { [key: <span class="hljs-built_in">string</span>]: DeviceStatus } = observer.getDeviceStatuses(); <span class="hljs-comment">// device name as key</span></code></pre>
				<p><strong>Lookup</strong></p>
				<pre><code class="language-typescript"><span class="hljs-keyword">let</span> group: Group = observer.getGroupById(<span class="hljs-number">1</span>);
<span class="hljs-keyword">let</span> groupId: <span class="hljs-built_in">number</span> = observer.getGroupIdByName(<span class="hljs-string">'SomeGroup'</span>);
<span class="hljs-keyword">let</span> machine: Machine = observer.getMachineById(<span class="hljs-number">1</span>);
<span class="hljs-keyword">let</span> predevice: PreDevice = observer.getPreDeviceByName(<span class="hljs-string">'cpu0'</span>);
<span class="hljs-keyword">let</span> deviceStatus: DeviceStatus = observer.getDeviceStatusByName(<span class="hljs-string">'cpu0'</span>);
<span class="hljs-keyword">let</span> ipmi: <span class="hljs-built_in">string</span> = observer.getIpmiAddressByName(<span class="hljs-string">'cpu0'</span>);</code></pre>
				<p><strong>Details</strong></p>
				<pre><code class="language-typescript">observer.fetchGroupDetails(<span class="hljs-number">1</span>).then(<span class="hljs-function">(<span class="hljs-params">grpDetails: GroupDetails</span>) =&gt;</span> { <span class="hljs-comment">/* ... */</span> });
observer.fetchMachineDetails(<span class="hljs-number">1</span>).then(<span class="hljs-function">(<span class="hljs-params">machDetails: MachineDetails</span>) =&gt;</span> { <span class="hljs-comment">/* ... */</span> });
observer.fetchDeviceDetails(<span class="hljs-string">'cpu0'</span>).then(<span class="hljs-function">(<span class="hljs-params">deviceDetails: DeviceDetails</span>) =&gt;</span> { <span class="hljs-comment">/* ... */</span> });</code></pre>
				<p><strong>Intended Mainly for Controller Use</strong></p>
				<pre><code class="language-typescript"><span class="hljs-comment">// Transform connection history to something more usable</span>
<span class="hljs-keyword">let</span> connectionHistList: ConnectionHistory[] = [ <span class="hljs-comment">/* ... */</span> ];
<span class="hljs-keyword">let</span> deviceStatuses: DeviceStatus[] = observer.convertHistToDevStatuses(connectionHistList);

<span class="hljs-comment">// You can get DeviceStatuses using .getDeviceStatuses, but you can use this if you</span>
<span class="hljs-comment">// you prefer it be categorized by device type.</span>
<span class="hljs-keyword">let</span> deviceStatuses: OrganizedDeviceStatuses = observer.getDeviceStatusesOrganized();

<span class="hljs-comment">// This is the core function for selecting deviceStatuses to be used in a machine</span>
<span class="hljs-comment">// It can handle quantities of devices, list of device names, and list of ipmi's.</span>
<span class="hljs-comment">// GatheringDevStatsOptions has a property called gatherUnused. </span>
<span class="hljs-comment">// If set to false, it will select from devices that are used by other machines.</span>
<span class="hljs-comment">// Ideally, set this to true.</span>
<span class="hljs-keyword">let</span> options: GatheringDevStatsOptions = { <span class="hljs-comment">/* ... */</span> };
<span class="hljs-keyword">let</span> deviceStatuses: DeviceStatus[] = observer.gatherRequiredDeviceStatuses(options);</code></pre>
				<p><strong>Miscellaneous</strong></p>
				<pre><code class="language-typescript"><span class="hljs-comment">// Get the fabric ID associated with this system</span>
<span class="hljs-keyword">let</span> id: <span class="hljs-built_in">number</span> = observer.getFabricId();

<span class="hljs-comment">// Set the busy state of the system. Intended for use by the LiqidController.</span>
<span class="hljs-comment">// True if you want to disable real time updates.</span>
<span class="hljs-comment">// False if you want to re-enable real time updates.</span>
observer.setBusyState(<span class="hljs-literal">false</span>);

<span class="hljs-comment">// Provide the group id to check if the group is empty or not.</span>
<span class="hljs-keyword">let</span> isEmpty: <span class="hljs-built_in">boolean</span> = observer.checkGroupIsEmpty(<span class="hljs-number">1</span>);

<span class="hljs-comment">// Check to see if a machine name is used;</span>
<span class="hljs-comment">// for determining if machine name can be used or not</span>
<span class="hljs-keyword">let</span> exists: <span class="hljs-built_in">boolean</span> = observer.checkMachNameExists(<span class="hljs-string">'MachName'</span>);

<span class="hljs-comment">// After a compose/create operation, the observer may not get notified right away,</span>
<span class="hljs-comment">// or its busy state is set to true. Use refresh to update the observer.</span>
observer.refresh().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Observer refreshed.'</span>) });</code></pre>
				<a href="#liqidcontroller" id="liqidcontroller" style="color: inherit; text-decoration: none;">
					<h4>LiqidController</h4>
				</a>
				<p>Use the LiqidController class to modify the state of the Liqid system. Almost all methods in this class will affect the state of the system in some way. Avoid creating multiple instances of this class on the same system. Using two instances at the same time can result in undefined behavior, because there&#39;s a high chance that one instance may nullify the commands of the other instance.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { LiqidController } <span class="hljs-keyword">from</span> <span class="hljs-string">'Composastructure'</span>;
<span class="hljs-keyword">var</span> controller = <span class="hljs-keyword">new</span> LiqidObserver(<span class="hljs-string">'10.0.100.125'</span>, <span class="hljs-string">'DevKit'</span>);

<span class="hljs-comment">// Calling start will allow the controller to start its own observer instance</span>
<span class="hljs-comment">// It will use this to determine if your create/compose command is valid or not</span>
controller.start().then(<span class="hljs-function">(<span class="hljs-params">success</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (success) <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Controller successfully started. You can now create/compose on DevKit system.'</span>);
});</code></pre>
				<p><strong>Control-Groups</strong></p>
				<p>These methods for groups are the same ones available in the REST API.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">let</span> group: Group = <span class="hljs-keyword">await</span> controller.createGroup(<span class="hljs-string">'GroupName'</span>);
<span class="hljs-keyword">let</span> deletedGroup: Group = <span class="hljs-keyword">await</span> controller.deleteGroup(<span class="hljs-number">1</span>); <span class="hljs-comment">// provide group id</span></code></pre>
				<p><strong>Control-Machines</strong></p>
				<p>These methods for machines are the same ones available in the REST API.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">let</span> composeOptions: ComposeOptions = { <span class="hljs-comment">/* ... */</span> };
<span class="hljs-keyword">let</span> machine: Machine = <span class="hljs-keyword">await</span> controller.compose(composeOptions);
<span class="hljs-keyword">let</span> deletedMachine: Machine = <span class="hljs-keyword">await</span> controller.decompose(<span class="hljs-number">1</span>); <span class="hljs-comment">// provide machine id</span></code></pre>
				<p><strong>Control-Devices</strong></p>
				<p>These methods for devices are not available in the REST API. They are used in the controller.compose(), but they are available for use if you choose. Some things to keep in mind though: </p>
				<ul>
					<li>moveDevicesToGroup works on any device that is not in a machine</li>
					<li>moveDevicesToMachine works only on devices that are in the same group as the machine</li>
					<li>you can&#39;t get a device out of a machine, but you can decompose the machine to get back the devices<pre><code class="language-typescript"><span class="hljs-keyword">let</span> deviceStatuses: DeviceStatus[] = [ <span class="hljs-comment">/* ... */</span> ];
<span class="hljs-keyword">await</span> controller.moveDevicesToGroup(deviceStatuses, <span class="hljs-number">1</span>); <span class="hljs-comment">// provide target group id</span>
<span class="hljs-keyword">await</span> controller.moveDevicesToMachine(deviceStatuses, <span class="hljs-number">1</span>); <span class="hljs-comment">// provide target mach id</span></code></pre>
					</li>
				</ul>
				<p><strong>Miscellaneous</strong></p>
				<pre><code class="language-typescript"><span class="hljs-comment">// Get the fabric ID associated with this system</span>
<span class="hljs-keyword">let</span> id: <span class="hljs-built_in">number</span> = controller.getFabricId();</code></pre>
				<a href="#22-liqid-api-composastructure-as-wrapper" id="22-liqid-api-composastructure-as-wrapper" style="color: inherit; text-decoration: none;">
					<h3>2.2: Liqid API (Composastructure as wrapper)</h3>
				</a>
				<p>Because Composastructure is built on Liqid&#39;s API, almost all of its endpoints are also available for use. Liqid&#39;s REST endpoints are wrapped in functions that return only the needed data instead of the entire http response. There is too much to describe, but here are some important things to know.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class="label tsd-is-external">
						<span>Internals</span>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_index_.html">&quot;index&quot;</a>
					</li>
					<li class="label tsd-is-external">
						<span>Externals</span>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_liqid_communicator_.html">&quot;liqid-<wbr>communicator&quot;</a>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_liqid_controller_.html">&quot;liqid-<wbr>controller&quot;</a>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_liqid_observer_.html">&quot;liqid-<wbr>observer&quot;</a>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_models_.html">&quot;models&quot;</a>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_rest_server_.html">&quot;rest-<wbr>server&quot;</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>